% --- Template for thesis / report with tktltiki2 class ---
% 
% last updated 2013/02/15 for tkltiki2 v1.02

\documentclass[english]{tktltiki2}

% tktltiki2 automatically loads babel, so you can simply
% give the language parameter (e.g. finnish, swedish, english, british) as
% a parameter for the class: \documentclass[finnish]{tktltiki2}.
% The information on title and abstract is generated automatically depending on
% the language, see below if you need to change any of these manually.
% 
% Class options:
% - grading                 -- Print labels for grading information on the front page.
% - disablelastpagecounter  -- Disables the automatic generation of page number information
%                              in the abstract. See also \numberofpagesinformation{} command below.
%
% The class also respects the following options of article class:
%   10pt, 11pt, 12pt, final, draft, oneside, twoside,
%   openright, openany, onecolumn, twocolumn, leqno, fleqn
%
% The default font size is 11pt. The paper size used is A4, other sizes are not supported.
%
% rubber: module pdftex

% --- General packages ---

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{microtype}
\usepackage{amsfonts,amsmath,amssymb,amsthm,booktabs,color,enumitem,graphicx}
\usepackage[pdftex,hidelinks]{hyperref}
\usepackage{verbatim}

% Automatically set the PDF metadata fields
\makeatletter
\AtBeginDocument{\hypersetup{pdftitle = {\@title}, pdfauthor = {\@author}}}
\makeatother

% --- Language-related settings ---
%
% these should be modified according to your language

% babelbib for non-english bibliography using bibtex
\usepackage[fixlanguage]{babelbib}

% add bibliography to the table of contents
\usepackage[nottoc]{tocbibind}

% --- Theorem environment definitions ---

\newtheorem{thm}{Theorem}
\newtheorem{lem}[thm]{Lemma}
\newtheorem{cor}[thm]{Corollary}

\theoremstyle{definition}
\newtheorem{definition}[thm]{Definition}

\theoremstyle{remark}
\newtheorem*{remark}{Remark}


% --- tktltiki2 options ---
%
% The following commands define the information used to generate title and
% abstract pages. The following entries should be always specified:

\title{Extending the “Development Pipeline” Towards Continuous Deployment and Continuous Experimentation: A Case Study in the B2B Domain}
\author{Olli Rissanen}
\date{\today}
\level{Master's thesis}
\abstract{Currently more and more software companies are moving to lean practices, which often include shorter delivery cycles and thus shorter feedback loops. However, to achieve continuous customer feedback and to eliminate work that doesn't generate value, even shorter cycles are required. In continuous deployment the software functionality is deployed continuously at customer environment. This process includes both automated builds and automated testing, but also automated deployment. Automating the whole process minimizes the time required for implementing new features in software, and allows for faster customer feedback. However, adopting continuous deployment doesn't necessarily mean that more value is created for the customer. While continuous deployment attempts to deliver an idea to users as fast as possible, continuous experimentation instead attempts to validate that it is, in fact, a good idea. In a state of continuous experimentation, the entire R\&D process is guided by controlled experiments and feedback. In it's core continuous experimentation consists of a design-execute-analyse loop, where hypotheses are selected based on business goals and strategies, experiments are executed with partial implementations and data collection tools and finally the results are analyzed to validate the hypothesis. In this paper we're .. \\\newline ACM Computing Classification System (CCS): \newline \textbf{General and reference $\rightarrow$ Experimentation} \newline \textbf{TODO: add rest}}

% The following can be used to specify keywords and classification of the paper:

\keywords{Continuous delivery, Continuous experimentation, Development pipeline}

%\classification{General and reference → Experimentation}
% classification according to ACM Computing Classification System (http://www.acm.org/about/class/)
% This is probably mostly relevant for computer scientists
% uncomment the following; contents of \classification will be printed under the abstract with a title
% "ACM Computing Classification System (CCS):"
% \classification{}

% If the automatic page number counting is not working as desired in your case,
% uncomment the following to manually set the number of pages displayed in the abstract page:
%
% \numberofpagesinformation{16 pages + 10 appendix pages}
%
% If you are not a computer scientist, you will want to uncomment the following by hand and specify
% your department, faculty and subject by hand:
%
\faculty{Faculty of Science}
\department{Department of Computer Science}
\subject{Computer Science}
%
% If you are not from the University of Helsinki, then you will most likely want to set these also:
%
\university{University of Helsinki}
% \universitylong{HELSINGIN YLIOPISTO --- HELSINGFORS UNIVERSITET --- UNIVERSITY OF HELSINKI} % displayed on the top of the abstract page
\city{Helsinki}
%


\begin{document}

% --- Front matter ---

\frontmatter      % roman page numbering for front matter

\maketitle        % title page
\makeabstract     % abstract page

\tableofcontents  % table of contents

% --- Main matter ---

\newpage

It’s hard to argue that Tiger Woods is pretty darn good at what he does. But even he is not perfect. Imagine if
he were allowed to hit four balls each time and then choose the shot that worked the best. Scary good.
-- Michael Egan, Sr. Director, Content Solutions, Yahoo (Egan, 2007)

\mainmatter       % clear page, start arabic page numbering



%case study
% Relate the theory to a practical situation; for example, apply the ideas 
%and knowledge discussed in the coursework to the practical situation 
%at hand in the case study. 
 
% Identify the problems 
% Select the major problems in the case 
% Suggest solutions to these major problems 
% Recommend the best solution to be implemented 
% Detail how this solution should be implemented

\section{Introduction} %Motivation
Lean software development, which was inspired by the Toyota Production System \cite{}, is a development approach attempting to eliminate unnecessary work and to create value for the customer. The approach consists of seven principles: eliminate waste, build quality in, deliver fast, optimise the whole, create knowledge, defer commitment and respect people. 

TODO: Connect this thesis with the Lean Startup Build-Measure-Learn cycle

IEEE divides the quality of a software component into two components: how well the software meets software requirements specifications, and how useful the software is to the end user.

CMMI 5th stage

A way to shorten the delivery cycles and to automate the delivery process is continuous deployment. It is an extension to continuous integration, where the delivery process is often entirely automated, and software functionality is deployed frequently to customer environment. While continuous integration defines a process where the work is automatically built, tested and frequently integrated to mainline \cite{fowler2006continuous}, often multiple times a day, continuous deployment adds automated acceptance testing and deployment. Continuous deployment therefore attempts to deliver an idea to users as fast as possible by automating the deployment process.

Bosch et al. introduce an innovation experiment system, where the development process consists of frequently deploying new versions, using customers and customer usaged data in the development process and finally by focusing on innovation and testing ideas with customers to drive customer satisfaction and revenue growth \cite{bosch2012building}. "First, it frequently deploys new versions focusing on continuously evolving the embedded software in short cycles of 2-4 weeks" \cite{eklund2012architecture}.

Continuous experimentation attempts to validate that an idea is, in fact, a good idea. In continuous experimentation the organisation runs controlled experiments to guide the R\&D process. The development cycle in continuous experimentation resembles the build-measure-learn cycle of lean startup \cite{ries2011lean}. The process in continuous experimentation is to first form a hypothesis based on a business goals and customer "pains" \cite{bosch2012building}. After the hypothesis has been formed, quantitative metrics to measure the hypothesis must be decided. After this a minimum viable product can be developed and deployed, while collecting the required data. Finally, the data is analyzed to attempt to validate the hypothesis.

%Data driven development
%Iteration of ideas in a controlled way
%Fail fast

\begin{figure}[H]
	\centering
	\includegraphics[width=3.5in]{stairway.jpg}
	\caption{Organization evolution path \cite{http://www.janbosch.com/Jan_Bosch/Software_Engineering.html}}
	\label{fig1}
\end{figure}

In this thesis we conduct a case study to analyse the adoption of continuous deployment and continuous experimentation in B2B domain. The case study consists of a literature review on applications of these practices, an interview of key members in the case company and analysis of the results. 

The purpose of this thesis is to

The main research questions are as follows.
\begin{itemize}
\item  \textbf{RQ 1: What is the Minimum Viable Process of continuous experimentation? How can the process be simplified without losing the benefits?}
\item  \textbf{RQ 2: What are the differences in continuous experimentation and continuous delivery in B2B as compared to B2C?}
\item  \textbf{RQ 3: Why would continuous experimentation benefit the case company? What are the problems and strengths of the current development process?}
\item  \textbf{RQ 4: How to collect usage data and customer feedback in B2B domain, where user amounts can be very low?}
\item  \textbf{RQ 5: How should continuous experimentation be implemented as a development process?}
\end{itemize}

The research approach is %approach

This thesis is organized as follows. Chapter II ..
%Structure:
%
%#1
%Background information - case study context - results - limitations - summary, future work
%#2
%Related work - experimental setup - results - summary
%-GOAL OF THE THESIS
%-motivation
%-research question
%-approach
%>analyze state of the practice
%>specify problem and goals 
%>analyze state of the art
%>state hypotheses
%>derive solution idea

\section{Background and related work}

\subsection{Case study}
Case study is a way to collect data through observation and to test theories in an unmodified setting \cite{zelkowitz1998experimental}. An opposite type of research would be a formal experiment, with a narrow focus and control on variables. Case studies are particularly important for industrial evaluation of software engineering methods and tools \cite{kitchenham1995case}. Generalizing the results of a case study is often a subject of internal validity \cite{TODO}. 

\subsection{Qualitative research}
Qualitative research attempts to answer to questions Why and How instead of What, Where and When as compared to quantitative research. The most common way to collect qualitative data is via an interview, which can be structured, unstructured or semi-structured \cite{Qualitative Methods in Empirical Studies of Software Engineering}. 

\section{State of the practice}	
%an overview of the entire process, then refining the parts that are relevant for the problems 
Steeri is a mid-sized company of 80 employees, focusing in managing and improving customer data usage. This includes CRM systems, business intelligence solutions, customer dialog and data integration. Steeri has created Customer data management (CDM) and Customer dialog (Dialog) products, which are developed by two different teams. 

These two teams develop in an agile manner, but the continuous integration process \cite{fowler2006continuous} and short feedback cycles aren't achieved yet. 

The development isn't at all distributed, and no external party affects the development process. 

\subsection{iSteer Contact backlog tool}

\subsubsection{Overview}

\subsubsection{Customer backlog}
Work items are first added to customer backlogs in iSteer Contact. In this phase they might be just initial skeletons and do not need to contain all needed information. The work items are added by product or business owners or project managers. At this phase the created backlog items are not yet visible in team backlogs in iSteer Contact. The idea is to list them in the customer backlog as early as possible and start refining the requirements collaboratively both offline and online with the help of tools such as Chatter. Chatter can be used to discuss a single story or the complete backlog.

When the backlog item is ready for the development team to start working on it, it should contain at least the following information:
A descriptive name
Specifications that explain both the technical side and the business side
Agilefant link four hour reporting

The backlog item is added to team backlog by selecting the “show in team backlog” -option.

\subsubsection{Team backlog}
Team backlog is a view to all stories assigned to one selected team. It is a tool to collect and organize stories from all customer/project backlogs without cloning details into multiple places. It’s just a view of all “in team backlog” stories that are not yet completed and are assigned to the selected team.

Completed stories related to one team can be found from the report (link in team detail page)
Team backlog items (stories) are prioritized and estimated once a week (Tuesday) and new stories will be moved to Trello when accepted by the development team.

Stories can be moved to Trello by project managers or product owners but they must be checked by team leader (Juha) who then moves them forward into the sprint backlog or prioritized list columns.

\subsection{Using Trello}

\subsubsection{Overview}
Trello is a project management application that uses Kanban to control the production chain from development to release. Kanban attempts to limit the work currently in progress by establishing an upper limit of tasks in the backlog, thus avoiding overloading of the team. Trello consists of multiple boards, each representing a project or a development team. A board consists of a list of columns, and each column consists of cards. Columns each contain a list of tasks, and cards progress from one column to the next when each task has been completed. A card is essentially a task, which is added by the Backlog Owner, and can be checked out by a developer. In Steeri, the columns used are Sprint Backlog, In Progress, Review, Ready, Verified and Done. 

\subsubsection{Sprint Backlog}
The Backlog Owner (Juha) moves the cards that have the highest priority into the sprint backlog. The sprint backlog should always contain enough cards so that whenever a developer completes a task something new is available in the backlog.

\subsubsection{In progress}
The actual development work is done in this stage. The actor here is the developer. The checklist to move a card into review stage is:
·       All tasks are complete
·       Changes are pushed to a feature-specific branch
·       Unit tests are written and pass in the CI server
·       Feature is well-written and does not need refactoring
·       Pull request is created and a link is added to the comment field
·       Feature has been documented as needed
If the feature needs refactoring a task list must be created and the card moved back to In Progress column.

\subsubsection{Review}
Here other developers review the new code and deploy it to a development environment. Checklist for moving the card into ready stage is:
·       Pull request is reviewed and by at least two (2) persons
·       Pull request is merged to the development branch
·       Feature is deployed to a development environment
·       Source code quality has to be good enough!
After you have reviewed the pull request leave yourself as an assignee. The second person who reviews the pull request is responsible for cleaning all the assignees and moving the feature to Ready column.
If there is a major problem in the pull request the feature should be moved back to Sprint Backlog and the yellow “Boomerang” tag added. Person who created the pull request is responsible for implementing the necessary remarks.
If only small fixes are needed, they should be implemented within the Github pull request workflow.
The second person who has reviewed and accepted the pull request is responsible for deploying the feature to a development environment.

\subsubsection{Ready}
Here the product owner verifies the new functionality in the development environment. The card can be moved to Verified if:
·       Feature has been verified by the Product Owner in the development environment
Product owner is responsible for moving the feature to the Verified column.
If the verification for the feature fails the Product Owner should move the feature back to Sprint Backlog column with the highest priority. In addition the Product Owner should add a yellow “Boomerang” label with a comment describing the results in the feature.

\subsubsection{Verified}
Here the backlog owner collects the timestamps and trello flow data. The timestamps depicts the duration it took from a card to process through the whole chain. The data is then used to analyze which columns the card spent the longest time in, and to identify the pain spots.
\subsubsection{Done}

This column simply states that the task has been completed, and should eventually be archived. There’s currently no general validation required from the customer, as the customer projects each have a different schedule and process for builds.
\subsubsection{Prioritized lists}

The backlog owner adds tasks to prioritized lists from team backlog as soon as the tasks meet the required criterias, contain the required information and are inspected by both the stakeholders and the backlog owner.

\subsection{After Trello}
Thnergefwdqa

\cite{olsson2012climbing}

-current state at steeri
    -short summary

Be sure to specify as much of the industrial context as possible. In particular,
clearly deﬁne the entities, attributes, and measures that are capturing the contextual information.

\section{State of the art}

Agile software development emerged from the iterative software development methods in the 1980's \cite{}. The general principles were
Many agile models, such as Scrum \cite{}, Extreme Programming \cite{} and Feature Driven Development \cite{} defined their own ..

Lean manufacturing \cite{}, derived from the Toyota Production System \cite{}, is a practice that aims to eliminate anything that doesn't create value for the end customer. 

Lean startup  

TODO: prelude:
-Agile software development
-Lean manufacturing & development
-Lean startup
-Stairway to heaven
-Innovation experiment system

\subsection{Continuous delivery}
Continuous deployment is an extension to continuous integration, where the software functionality is deployed frequently at customer environment. While continuous integration defines a process where the work is automatically built, tested and frequently integrated to mainline \cite{fowler2006continuous}, often multiple times a day, continuous deployment adds automated acceptance testing and deployment. The purpose of continuous deployment is that as the deployment process is completely automated, it reduces human error, documents required for the build and increases confidence that the build works \cite{cdbook}. 

In an agile process software release is done in periodic intervals \cite{cockburn2002agile}. Compared to waterfall model it introduces multiple releases throughout the development. Continuous deployment, on the other hand, attemps to keep the software ready for release at all times during development process \cite{cdbook}. Instead of stopping the development process and creating a build as in an agile process, the software is continuously deployed to customer environment. This doesn't mean that the development cycles in continuous deployment are shorter, but that the development is done in a way that makes the software always ready for release.
\begin{figure}[!t]
	\centering
	\includegraphics[width=3.5in]{rtvd.jpg}
	\caption{Continuous integration, delivery and deployment}
	\label{fig1}
\end{figure}
Continuous delivery differs from continuous deployment. Refer to Fig. \ref{fig1} for a visual representation of differences in continuous integration, delivery and deployment. Both include automated deployment to a staging environment. Continuous deployment includes deployment to a production environment, while in continuous delivery the deployment to a production environment is done manually. The purpose of continuous delivery is to prove that every build is proven deployable \cite{cdbook}. While it necessarily doesn't mean that teams release often, keeping the software in a state where a release can be made instantly is often seen beneficial.

\subsubsection{Deployment pipeline}
An important part of continuous deployment is the deployment pipeline, which is an automated implementation of an application's build, deploy, test and release process \cite{cdbook}. A deployment pipeline can be loosely defined as a consecutively executed set of validations that a software has to pass such before it can be released. Common components of the deployment pipeline are a version control system and an automated test suite.

Humble and Farley define the deployment pipeline as a set of stages, which cover the path from a committed change to a build \cite{cdbook}. Refer to Fig. \ref{fig2} for a graphical representation of a basic deployment pipeline. The commit stage compiles the build and runs code analysis, while acceptance stage runs an automated test suite that asserts the build works at both functional and nonfunctional level. From there on, builds to different environments can be deployed either automatically or by a push of a button.

Humble et al. define four principles that should be followed when attempting to automate the deployment process \cite{humble2006deployment}. The first principle states that "Each build stage should deliver working software". As software often consists of different modules with dependencies to other modules, a change to a module could trigger builds of the related modules as well. Humble et al. argue that it is better to keep builds separate so that each discrete module could be built individually. The reason is that triggering other builds can be inefficient, and information can be lost in the process. The information loss is due to the fact that connection between the initial build and later builds is lost, or at least causes a lot of unnecessary work spent in tracing the triggering build. 

The second principle states that "Deploy the same artifacts in every environment". This creates a constraint that the configuration files must be kept separate, as different environments often have different configurations. Humble et al. state that a common anti-pattern is to aim for 'ultimate configurability', and instead the simplest configuration system that handles the cases should be implemented.
\begin{figure}[H]
	\centering
	\includegraphics[width=3.5in]{pipeline.jpg}
	\caption{A basic deployment pipeline \cite{cdbook}.}
	\label{fig2}
\end{figure}
Another principle, which is the main element of continuous deployment, is to "Automate testing and deployment". Humble et al. argue that the application testing should be separated out, such that stages are formed out of different types of tests. This means that the process can be aborted if a single stage fails. They also state that all states of deployment should be automated, including deploying binaries, configuring message queues, loading databases and related deployment tasks. Humble et al. mention that it might be necessary to split the application environment into $slices$, where each slice contains a single instance of the application with predetermined set of resources, such as ports and directories. $Slices$ make it possible to replicate an application multiple times in an environment, to keep distinct version running simultaniously. Finally, the environment can be smoke tested to test the environments capabilities and status.

The last principle states "Evolve your production line along with the application it assembles". Humble et al. state that attempting to build a full production line before writing any code doesn't deliver any value, so the production line should be built and modified as the application evolves. 

A picture of the typical development process in continuous deployment is shown in Fig. \ref{fig3}. After the team pushes a change to the version control system, the project is automatically built and tests are triggered stage by stage. If a test stage fails, feedback is given and the deployment process effectively cancelled. In a continuous delivery process, the last stages are approved and activated manually, but in a continuous deployment process the last stages are triggered automatically as well.

\begin{figure}[!t]
	\centering
	\includegraphics[width=3.5in]{developmentprocess.jpg}
	\caption{Components of the development process \cite{cdbook}.}
	\label{fig3}
\end{figure}

\subsubsection{Effects to development model}

\subsection{Continuous experimentation}

-Data driven decisions
-Link product development and business aspect
-React to customers present needs
-Fail fast
-Turn hypotheses into facts
-Steer development process
-systematic!
-for a method: what, how, when, who

\cite{eklund2012architecture}
Applied the continuous experimentation research to embedded software.
"Improvement occurs in individual software parts, but the underlying design concept remain mostly unchanged [3]"
"The experiment infrastructure allows developers to deploy new software and collect data how it behaves in areal-world settings being used by actual users. The infrastructure support deployment of software experiments and collection of data over-the-air on a scale comparable to the entire customer base". 
"The infrastructure supports with automated randomisation and factorial designs [6] sufficient to draw statistical conclusions from the experimental scenarios."
"The experiment manager architecture, seen in Figure 3, supports the deployment of multiple experimental software parts to the same device and autonomously controls when to run which experiment, even allowing for local A/B-testing. Measurements and analysis is done on-board in real-time. The experiment scenario to be answered is implemented on the embedded device (i.e. how long does it take to . . . )"
TODO: picture here


An experiment is essentially a procedure to confirm the validity of a hypothesis. In software engineering context, experiments attempt to answer questions such as which features are necessary for a product to succeed, what should be done next and which customer opinions should be listened to. According to Jan Bosch, "The faster the organization learns about the customer and the real world operation of the system, the more value it will provide" \cite{bosch2012building}. Most organizations have many ideas, but the return-on-investment for many may be unclear and the evaluation itself may be expensive \cite{kohavi2007practical}. 

In Lean startup methodology \cite{ries2011lean} experiments consist of Build-Measure-Learn cycles, and are tightly connected to visions and the business strategy. The purpose of a Build-Measure-Learn cycle is to turn ideas into products, measure how customers respond to the product and then to either pivot or persevere the chosen strategy. The cycle starts with forming a hypothesis and building a minimum viable product (MVP) with tools for data collection. Once the MVP has been created, the data is analyzed and measured in order to validate the hypothesis. To persevere with a chosen strategy means that the experiment proved the hypothesis correct, and the full product or feature can is implemented. However, if the experiment proved the hypothesis wrong, the strategy is changed based on the implications of a false hypothesis.

Continuous deployment attempts to deliver an idea to users as fast as possible. Continuous experimentation instead attempts to validate that it is, in fact, a good idea. In continuous experimentation the organisation runs controlled experiments to guide the R\&D process. The development cycle in continuous experimentation resembles the build-measure-learn cycle of lean startup. The process in continuous experimentation is to first form a hypothesis based on a business goals and customer "pains" \cite{bosch2012building}. After the hypothesis has been formed, quantitative metrics to measure the hypothesis must be decided. After this a minimum viable product can be developed and deployed, while collecting the required data. Finally, the data is analyzed to attempt to validate the hypothesis.

Jan Bosch has widely studied continuous experimentation, or innovation experiment systems, as a basis for development. The primary issue he found is that "experimentation in online software is often limited to optimizing narrow aspects of the front-end of the website through A/B testing and inconnected, software-intensive systems experimentation, if applied at all, is ad-hoc and not systematically applied" \cite{bosch2012building}. The author realized that for different development stages, different techniques to implement experiments and collect customer feedback exist. Bosch also introduces a case study in which a company, Intuit, adopted continuous experimentation and has increased both the performance of the product and customer satisfaction.

\subsubsection{Experimentation planning}

\subsubsection{Experimentation stages and scopes}
Fig. \ref{fig4} introduces different stages and scopes for experimentation. For each stage and scope combination, an example technique to collect product performance data is shown. As startups often start new products and older companies instead develop new features, experiments must be applied in the correct context. Bosch states that for a new product deployment, putting a minimal viable product as rapidly as possible in the hands of customers is essential \cite{bosch2012building}. After the customers can use the product, it is often not yet monetizable but is still of value to the customer. Finally, the product is commercially deployed and collecting feedback is required to direct R\&D investments to most valuable features.
\begin{figure}[!htbp]
	\centering
	\includegraphics[width=3.5in]{scopes.jpg}
	\caption{Scopes for experimentation\cite{bosch2012building}.}
	\label{fig4}
\end{figure}

\subsubsection{Components in continuous experimentation}
Kohavi et al. investigate the practical implementations of controlled experiments on the web \cite{kohavi2007practical}, and state that the implementation of an experiment involves two components. The first component is a randomization algorithm, which is used to map users to different variants of the product in question. The second component is an assignment method which, based on the output of the randomization algorithm, determines the contents that each user are shown. The observations then need to be collected, aggregated and analyzed to validate a hypothesis. Kohavi et al. also state that most existing data collection systems are not designed for the statistical analyses that are required to correctly analyze the results of a controlled experiment.

The components introduced by Kohavi et al. are aimed primarily for A/B testing on websites. Three ways to implement the assignment methods are shown. The first one is traffic splitting, which directs users to different fleet of servers. An alternative methods is server-side selection, in which API calls invoke the randomization algorithm and branch the logic based on the return value. Last alternative is a client-side selection, in which the front-end system dynamically modifies the page to change the contents. Kohavi et al. state that the client-side selection is easier to implement, but it severely limits the features that may be subject to experimentation. Experiments on back-end are nearly impossible to implement in such manner.

\subsubsubsection{Data collection}
To collect, aggregate and analyze the observations, raw data has to be recorded. According to Kohavi et al., some raw data could be for example page views, clicks, revenue, render time and customer-feedback selections \cite{kohavi2007practical}. The data should also be annotated to an identifier, such that conclusions can be made from it. Kohavi et al. present three different ways for collecting raw data. The first solution is to simply use an existing data collection tool, such as Webmetrics. However, most data collection systems aren't designed for statistical analyses, and the data might have to be manually extracted to an analysis environment. A different approach is local data collection, in which a website records data in a local database or log files. The problem with local data collection is that each additional source of data, such as the back-end, increases the complexity of the data recording infrastructure. The last model is a service-based collection, in which service calls to a logging service are placed in multiple places. This centralizes all observation data, and makes it easy to combine both back-end and front-end logging.  

\subsubsubsection{Data analysis}
To analyze the raw data, it must first be converted into metrics which can then be compared between the variants in a given experiment. An arbitrary amount of statistical tests can then be run on the data with analytics tools in order to determine statistical significance. 

\subsubsection{Roles in continuous experimentation}
Fagerholm et al. define five different roles in continuous experimentation: Business Analyst, Product Owner, Data Analyst, Software Developer and Quality Assurance \cite{fagerholm2014building}. The business analyst along with the product owner are responsible for creating and updating the strategic roadmap, which is the basis of the hypotheses. The basis for decisions are the existing experimental plans and results stored in a database. A data analyst is used to analyze the existing experiments and results and to create assumptions from the roadmap. The analyst is also responsible for the design and execution of experiments. The data analyst is in tight collaboration with the software developer and quality assurance, who are reponsible for the development of MVPs and MVFs. The software designers create the necessary instrumentations used to collect the data required by the analyst.

%question: what if there are no existing experimental plans, and this is the first experiment? how should the roadmap be created?

\begin{figure}[H]
	\centering
	\includegraphics[width=3.5in]{infra.jpg}
	\caption{Continuous experimentation infrastructure \cite{fagerholm2014building}.}
	\label{fig4}
\end{figure}

%http://www.janbosch.com/Jan_Bosch/Innovation_Experiment_Systems.html
\subsection{Continuous deploymend and continuous experimentation collaboration}
As the experiments are run in a regular fashion, integrating experiments to the deployment pipeline should be considered. This requires changing the development process in such fashion that functionality is developed based on some actual data. The components required to support continuous experimentation include tools to assign users to treatment and control groups, tools for data logging and storing, and analytics tool for conducting statistical analyses.

\subsection{Challenges regarding continuous delivery}
-Technical implementation
-Education on the subject
-Active participation of employees

\subsection{Challenges regarding continuous experimentation}
-Roles
-Environment
-Deployment

\section{Research study}

\subsection{Objective} %what to achieve?

The study is an exploratory case study, which aims to explore how continuous deployment and continuous experimentation can be integrated to the development process of the company in question. The study specifically aims to identify the main requirements, problems and key success factors with regards to these approaches. Integrating these approaches to the development process requires a deep analysis of the current development process, seeking the current problems and strenghts. Adopting both continuous deployment and continuous experimentaton also requires understanding the requirements of continuous deployment and continuous experimentation. 

Existing documented applications of continuous experimentation are primarily executed in the B2C domain, often with a SaaS product. Examples are the Microsoft EXP platform \cite{ep} and Etsy \cite{}. The focus of this study is in the B2B domain, with an application that is not used as SaaS. As the development process greatly varies in other teams inside the company, the focus is on a single team to narrow the scope.

An interview is used to analyze and identify the pain points continuous deployment and continuous experimentation encounter in the B2B domain. After the interview, results are analyzed and addressed... TODO: continue

\subsection{Case} %what is studied?
Kitchenham et al. (Kitchenham et al., 2002) state that the experimental context needs the three elements: background information, discussion of research hypotheses, and information about related research. The two former will be discussed here, and the latter in the section "Frame of reference".

The company in question is Steeri Oy, which is a medium-sized company specializing in managing, analyzing and improving the usage of customer data. In this research, the unit under the study is the Development & Integration team, which is split into two sub-teams: Dialog and CDM. 

The Dialog team focuses on developing a multiple-channel online marketing automation, iSteer Dialog. It is a software product designed to allow effective marketing on multiple channels, such as e-mail and websites, and to automate repetitive tasks. The product can be integrated to existing CRM solutions, and the data stored in CRM can then be effectively used for marketing purposes. The software is configured and integrated to the customer environment as project work. This deployment doesn't require additional code as per customer, but only different configuration files. 

The CDM team focuses on building a Master Data Management (cite) solution, which integrates the customers data sources such as CRM, ERP and billing system to create a single point of reference. The product also manages the data by removing duplicate records, matching same records and cleaning and validating the data with the help of external data such as the resident registration database. The product is deployed manually to a customer, and certain custom specific configurations and rules have to be implemented in the code. 

The development process of the team is elaborated in detail in the chapter "State of the practice". 

The unit of analysis is the development process of the team. The whole development process consists of the development framework used, but also of the interaction with customers, tools used in the current development process and the roles of individuals in the process. The unit of analysis is studied by focusing on interviewing individual members at different positions in the organisation. The purpose of the interview is to identify the pain points in the development process regarding continuous deployment and continuous experimentation. 

TODO: describe organisation structure %: https://docs.google.com/a/steeri.fi/spreadsheet/ccc?key=0Ai02aScOCplAdG9zQURicnlkM0ptTXhqbHN5ZE04X0E&usp=drive_web#gid=0

The organisation of Steeri Oy is of a divisional type, with each business area forming independent teams based on the products and projects. The sub-teams under study have a common team leader, but different product owners and middle management. 

Continuous deployment and continuous experimentation haven't been previously used by the case company.  

In the beginning of the study, feedback was only collected in the form of bug reports from the customers. The bugs were then prioritized according to the importance, and added into the Trello workflow. 

Under analysis is also the company's ways to interact with the customer.

\subsection{Theory} %frame of reference

This case study builds on existing research on both continuous deployment and continuous experimentation. The chapter State of the Art 

TODO: open this chapter

Based on the existing research in Continuous Experimentation and Continuous Deployment:

Crook et al: Seven pitfalls to avoid when running controlled experiments on the web

Eric Ries: The lean startup: How today's entrepreneurs use continuous innovation to create radically successful businesses

Kohavi et al: Practical guide to controlled experiments on the web: listen to your customers not to the hippo

Fagerholm et al: Building Blocks for Continuous Experimentation

Jan Bosch: Building products as innovation experiment systems

Olsson et al: Climbing the" Stairway to Heaven"--A Multiple-Case Study Exploring Barriers in the Transition from Agile Development towards Continuous Deployment of Software

Humble et al: The deployment production line

Humble et al: Continuous Delivery: Reliable Software Releases Through Build, Test, and Deployment Automation

Microsoft EXP platform

The researcher is a part of the development team of the company, but the viewpoint ...

\subsection{Research questions} %what to know? ##Research questions—what to know? these fulfill the objective##
%Literature review
\noindent \textbf{RQ 1: What is the Minimum Viable Process of continuous experimentation? How can the process be simplified without losing the benefits?}

\noindent Continuous experimentation process with multiple different roles is quite heavyweight, and not quickly adoptable. The purpose of this research question is to attempt to investigate whether only the core process of continuous experimentation can be adopted and used in practice. A way to do this is for example to avoid creating new roles only for the purpose of continuous experimentation. This way it is quick for companies to test whether the process suits their needs. This research question is answered based on literature review. \newline


%Literature review / Interview
\noindent \textbf{RQ 2: What are the differences in continuous experimentation and continuous delivery in B2B as compared to B2C?}

\noindent In B2B domain the connection with end users might not be established properly, and the customer feedback might only be received from certain key members. Running experiments on customer environments also requires a new deployment of the software product. TODO: question: contractual issues? The purpose of this research question is to identify the differences in the software development process and the product in B2B and B2C environments, and it is answered based on both literature review and interview. \newline

Question: selecting the correct OEC in b2b is harder. for example revenue. 
question: in B2C people develop their own product, but in B2B the feature ideas might come only from customer.

%Interview results have to be compared to literature review results
\noindent \textbf{RQ 3: Why would continuous experimentation benefit the case company? What are the problems and strengths of the current development process?}

\noindent To rationalize the decision to adopt continuous experimentation in a company, the actual benefits to the business have to be identified. This question is answered by comparing problems and benefits of literature review to the results of the interview. \newline

%collect ideas from literature review and interview
\noindent \textbf{RQ 4: How to collect usage data and customer feedback in B2B domain, where user amounts can be very low?}

\noindent As compared to the B2C domain where the product is often deployed in cloud with a lot of users, B2B applications might only have a handful of users. This question is answered by collecting ideas from the literature review and interview results. \newline
-Legal issues
-Technical issues

%collect ideas from literature review and interview
\noindent \textbf{RQ 5: How should continuous experimentation be implemented as a development process?}

\noindent When the benefits and requirements are identified and the process is approved by a company, it has to be adopted in practice. This requires an answer to questions what, how, who and when. This question is answered by collecting ideas from the literature review and interview results. \newline
-Where do the feature ideas come from?
-What roles are required?

%How is the current interaction with the customer?
%	subquestion: What are the current roles and stakeholders?
%How should continuous experimentation guide the development process?
%	subquestion: Where do the development ideas come from? Customer, team, management?
%How to collect feedback in a B2B domain?
%	subquestion: Who should use the collected feedback?
%	subquestion: Who is responsible for collecting the feedback?
%How to collect feedback without a SaaS product?
 %   subquestion: Where should the data be stored?
  %  subquestion: How should the data be accessed?
%How to shorten the time between the idea and implementation?%
%	subquestion: What are the roles?
%How should continuous delivery be integrated in the development process?
%	subquestion: How to keep the product in a stage where it can be released at all times?
%What tools are necessary for continuous deployment?
%What tools are necessary for continuous experimentation?
%If an impact is done right now, when will the effects be visible?
%The whole pipe between the idea and implementation isn't yet completely perceived. Some parts are visible, but the entirety is still unclear.
%How do we validate whether a feature is succesful or not? 
\subsection{Methods} %how to collect data? TODO: what, how, why?
The primary source of information in this research are semi-structured interviews performed within the Development & Integration team and its management. TODO: business people? The interview consists of pre-defined themes as follows: (1) current development process, (2) current deployment process, (3) current interaction with customers, (4) problems and strengths in the current development process, (5) software product, (6) future ways with continuous deployment and continuous experimentation. Data triangulation will be implemented by interviewing multiple individuals. Methodological triangulation will be implemented by collecting documentary data regarding the development process.

Data regarding the development process is also collected from the internal documents.
Trello, documents

TODO: Analysis is done
 -roles (devs, business, PO's)
 -

%If developers and business people agree, the company is heading to right direction TODO: seek quote

\subsection{Selection strategy - where to seek data?}

Interview data will be primarily sought from the developers of the development teams and the managers of the team. Process data will be sought from the process documents made by the team. Quantitative data, such as the Trello ticket flow time, is sought from Trello. 

\subsection{Interview questions}

\subsubsection{Background}

\begin{center}
    \begin{tabular}{ | l | l | l | p{5cm} |}
    \hline
    ID & Question & Reason & Notes \\ \hline
    1 & Name of the interviewee & Background & - \\ \hline
    2 & Team of the interviewee & Background & - \\ \hline
    3 & Position of the interviewee & Background & - \\ \hline
    4 & Years of experience in the industry & Background & - \\ \hline
    5 & What is the software product you're working with? & Background &  \\ \hline
    \hline
    \end{tabular}
\end{center}

\subsubsection{Current development process}

\begin{center}
    \begin{tabular}{ | l | l | l | p{5cm} |}
    \hline
    ID & Question & Reason & Notes \\ \hline
    a & Describe your personal daily work routine & General & \\ \hline
    a & Describe a normal week with your team & General & \\ \hline
    %a & What is the current development model in your team? & General & d \\ \hline
    a & How has the development model evolved during your stay in the company? & General & d \\ \hline
    a & Where do the development ideas come from? Are they mostly requirements from customers? & Continuous experimentation & d \\ \hline
    %a & Are the current development ideas based on evidence or guesswork? & Continuous experimentation & d \\ \hline
    \hline
    \end{tabular}
\end{center}

\subsubsection{Current deployment process}

\begin{center}
    \begin{tabular}{ | l | l | l | p{5cm} |}
    \hline
    ID & Question & Reason & Notes \\ \hline
    a & What is the current deployment process like? & Continuous deployment & Deployment process \\ \hline
    a & Who decides when to deploy? & Continuous deployment & Deployment process \\ \hline
    a & Who decides what to deploy? & Continuous deployment & Deployment process \\ \hline
    a & How often is new version released ? & Continuous deployment & Deployment process \\ \hline
    a & How often are the new versions deployed to customer?? & Continuous deployment & Deployment process \\ \hline
    a & How are the deployment dates chosen? & Continuous deployment & Deployment process \\ \hline

    a & Which parts of the deployment process are manual? & Continuous deployment & Technical \\ \hline
    a & Which parts of the deployment process are hard to measure automatically? & Continuous deployment & Technical \\ \hline

    a & Is the customer involved in the deployment process? & Continuous deployment & Customer involvement \\ \hline
    a & Does the customer have to do something when a version is deployed? & Continuous deployment & Customer involvement \\ \hline

    a & What are the strenghts in the current deployment process? & Continuous deployment & d \\ \hline
    a & What are the problems in the current deployment process? & Continuous deployment & d \\ \hline
    \hline
    \end{tabular}
\end{center}

\subsubsection{Current interaction with the customer}

\begin{center}
%\centerline{
    \begin{tabular}{ | l | l | l | p{5cm} |}
    \hline
    ID & Question & Reason & Notes \\ \hline
    a & Who is responsible for interacting with the customer? & General & d \\ \hline
    a & From your point of view, what are the challenges with the customer interaction? & General & d \\ \hline
    a & From your point of view, what are the strengths with the customer interaction? & General & d \\ \hline
    a & From your point of view, how could the interaction with the customer be improved? & General & d \\ \hline
	a & Is it common for customers requirements to change? & General &  \\ \hline
    a & Is the development team aware of the customers present requirements? & General &  \\ \hline

	a & How is feedback collected from the customer? & Continuous experimentation & RQ 4: Data collection \\ \hline
	a & What are the B2B specific challenges in feedback collection? & Continuous experimentation & RQ 4: Data collection \\ \hline
	a & From your point of view, how could the feedback collection be improved? & Continuous experimentation & RQ 4: Data collection \\ \hline
	a & How is the customer feedback used? & Continuous experimentation & Data usage \\ \hline	
	a & From your point of view, how could the feedback usage be improved? & Continuous experimentation & Data usage \\ \hline

    \hline
    \end{tabular}
%    }
\end{center}

\subsubsection{Software product}

\begin{center}
    \begin{tabular}{ | l | l | l | p{5cm} |}
    \hline
    ID & Question & Reason & Notes \\ \hline
    a & How many end-users does the product have? & General &  \\ \hline
    a & How is usage data collected? & Continuous experimentation & RQ 4: Data collection \\ \hline
    a & How could usage data collection be improved? & Continuous experimentation & RQ 4: Data collection \\ \hline

    a & What technical challenges would real-time deployment have? & Continuous deployment & RQ 2 \\ \hline
    a & What technical challenges would plugged-in data collection instruments have? & Continuous experimentation & RQ 4: Data collection \\ \hline
    a & If data were to be collected in customer environment, what challenges would be faced storing it? & Continuous experimentation & RQ 4: Data storage \\ \hline
    \hline
    \end{tabular}
\end{center}

\subsubsection{Problems and strenghts in the current development process}

\begin{center}
    \begin{tabular}{ | l | l | l | p{5cm} |}
    \hline
    ID & Question & Reason & Notes \\ \hline
	a & What are the strenghts in the current development process? & General & RQ 3 \\ \hline
    a & What are the problems in the current development process? & General & RQ 3 \\ \hline
    \hline
    \end{tabular}
\end{center}

\subsubsection{Future ways with continuous deployment and continuous experimentation}

\begin{center}
    \begin{tabular}{ | l | l | l | p{5cm} |}
    \hline
    ID & Question & Reason & Notes \\ \hline
    a & Could your product be instrumented with a data collection service? If not, why? & Continuous experimentation & RQ 4: Data collection \\ \hline
    a & In your product, could experiments be quickly deployed to the customer environment? & Continuous experimentation & d \\ \hline
    a & In your product, could the development process be guided by A/B testing? & Continuous experimentation & d \\ \hline
    a & Does your team have a data analyst? & Continuous experimentation & d \\ \hline
    \hline
    \end{tabular}
\end{center}

\section{Needs, problems and challenges}

\subsection{Problems} %Should address an underlying research question

TODO:
Research problem: "High-level slogan"
How to adopt CD and CE in the case company?

Research questions:

Larger context, narrow context
Subproblems
More concrete (Who is having a problem?)

-Continuous experimentation is a model, not a process: what, when, who, how

-Collecting feedback in B2B domain
  In B2B domain the connection with end users might not be established properly, and the feedback can only be received from the other company's key members. However, the feedback from end users is especially important. 

  Without the data from end users, no usage data is collected all. 

  Pilot approach: Prioritize bugs based on the amount of occurrences

-Collecting feedback without a SaaS product
  In a SaaS platform it is easier to plug in measurement tools to the software, as the environment is that of the company responsible for the service. Without a SaaS environment, the data has to be collected and stored in customer environment. 

  Thus, the collection of the data takes unnecessary effort, and the whole usage data is totally missing. The product development decisions aren't therefore based on data, and are potentially less effective than decisions based on measurable, quantitative data.

-The time between the idea and implementation is too long
  Currently the ideas are not tested at all, but the effects are planned in a waterfall style and implemented thoroughly before a release. Making partial implementations could however allow the use of quantitative or qualitative data to measure whether an idea is worth implementing at all.

  Management can also better convince other internal stakeholders that a feature might be of importance

-Time dimension. If an impact is done right now, when will the effects be visible?
  Adding the correct measurement metrics to a feature also make the impact more visible.

-Conventions for production deployment. The whole pipe between the idea and implementation isn't yet completely perceived. Some parts are visible, but the entirety is still unclear.
  Forming the development pipeline to include both experiments and automated deployment makes the entirety clear from the idea to the release.

-How do we validate whether a feature is succesful or not? In B2C this is usually done by observing shifts in sales, but in our product there's no such thing.
  The measurement metric has to be chosen such that a decision can be made to judge if the feature is succesful or not.

-How to use the collected data to improve decision making?
  TODO

-Trello flow time?
  Occasional deploying takes time. Speeding it up would eventually improve flow time.

-Possible thing we can analyze is user experience, but is it enough?

\subsection{goals}
Requirements should be testable

-Continuously collect feedback from customers.
    Subgoal: Define the type of feedback to be collected
    Subgoal: Define a mechanism for feedback collection
    Subgoal: figure out how to collect feedback
    Subgoal: figure who is responsible for analyzing feedback
	Req: Feedback can be continuously collected from customers
	Req: The person responsible for collecting feedback can be identified 
-Reduce the length of the delivery cycle.
	Subgoal: Identify the components in the delivery cycle
	Subgoal: Identify what takes too long
	Req: The delivery cycle is completely perceived
	Req: The length of the delivery from idea to deployment is shortened
-Be able to measure the effectiveness of a feature.
	Subgoal: Implement measurement tools
	Subgoal: Implement data analysis tools
	Subgoal: collect data whenever a feature is deployed to measure the performance	
    Req: Data can be collected from an implemented feature 
    Req: Collected data can be analyzed to form an answer

\subsection{solutions}

\subsection{solution idea}




\section{Analysis}

 (1) current development process, (2) current deployment process, (3) current interaction with customers, (4) problems and strengths in the current development process, (5) software product, (6) future ways with continuous deployment and continuous experimentation.


\subsection{Current development process}

\subsection{Current deployment process}

\subsection{Current interaction with the customer}

\subsection{Problems and strenghts in the current development process}

\subsection{Software product}

\subsection{Future ways with continuous deployment and continuous experimentation}

\section{Research results}

\item  \textbf{RQ 1: What is the Minimum Viable Process of continuous experimentation? How can the process be simplified without losing the benefits?}
Based on the literature review

The interview

\item  \textbf{RQ 2: What are the differences in continuous experimentation and continuous delivery in B2B as compared to B2C?}

The literature review revealed

\item  \textbf{RQ 3: Why would continuous experimentation benefit the case company? What are the problems and strengths of the current development process?}


\item  \textbf{RQ 4: How to collect usage data and customer feedback in B2B domain, where user amounts can be very low?}
\item  \textbf{RQ 5: How should continuous experimentation be implemented as a development process?}


The simplest experiment cycle:
1.oec
2.
3.impl
4.analysis
5.steer

\section{Conclusions}


% --- References ---
%
% bibtex is used to generate the bibliography. The babplain style
% will generate numeric references (e.g. [1]) appropriate for theoretical
% computer science. If you need alphanumeric references (e.g [Tur90]), use
%
% \bibliographystyle{babalpha-lf}
%
% instead.

\bibliographystyle{babplain-lf}
\bibliography{gradu}


% --- Appendices ---

% uncomment the following

% \newpage
% \appendix
% 
% \section{Example appendix}

\end{document}
